{"version":3,"sources":["transports/ajax/storeError.js"],"names":[],"mappings":";;;;;;;AAOA,YAAY,CAAC;;;;;;;;sBAEC,QAAQ;;;;6BACJ,gBAAgB;;;;AAClC,IAAM,OAAO,GAAG,2BAAM,OAAO,CAAC,MAAM,CAAC,CAAC;;qBAEvB,UAAS,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE;AAC1C,MAAM,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;AACzC,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;AACrC,MAAI,QAAQ,GAAG,IAAI,CAAC;;;;;;AAMpB,MAAI;AACF,YAAQ,GAAG,oBAAE,SAAS,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;GAC5C,CAAC,OAAO,CAAC,EAAE;AACV,WAAO,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AACzB,WAAO;GACR;;AAED,MAAM,MAAM,GAAG;AACb,gBAAY,EAAA,wBAAG;;;;AAIb,UAAI,MAAM,CAAC,KAAK,EAAE;AAChB,eAAO,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;OAC1C;;;;;AAKD,aAAO,CAAC,OAAO,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;KACpC;GACF,CAAC;;AAEF,GAAC,MAAM,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,YAAY,CAAA,EAAG,CAAC;CACnE","file":"transports/ajax/storeError.js","sourcesContent":["//\n// #orchestra/transports/storeError.js\n//\n\n// Global ajax error handling\n//\n//\n'use strict';\n\nimport $ from 'jquery';\nimport Radio from 'backbone.radio';\nconst channel = Radio.channel('main');\n\nexport default function(e, jqXHR, req, err) {\n  const config = channel.request('config');\n  const statusCode = jqXHR.status + '';\n  let errorObj = null;\n\n  //\n  // catch error if response does not provide a proper\n  // response\n  //\n  try {\n    errorObj = $.parseJSON(jqXHR.responseText);\n  } catch (e) {\n    console.error(e.message);\n    return;\n  }\n\n  const errors = {\n    defaultError() {\n      //\n      // only log in debug mode\n      //\n      if (config.debug) {\n        console.log('ERROR', e, jqXHR, req, err);\n      }\n\n      //\n      // triggers global `ajaxError` event\n      //\n      channel.request('ajax:error', err);\n    }\n  };\n\n  (errors[statusCode] ? errors[statusCode] : errors.defaultError)();\n}\n"],"sourceRoot":"/source/"}