{"version":3,"sources":["helpers/translate.js"],"names":[],"mappings":";;;AAGA;;;;;;;;AAEA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAM,YAAY,EAAZ;AACN,IAAM,UAAU,mBAAM,OAAN,CAAc,QAAd,CAAV;;IAEA;;;;;;;gCAEQ;AACV,UAAI,SAAS,OAAT,CADM;;AAGV,UAAI,QAAQ,OAAR,CAAgB,QAAhB,CAAJ,EAA+B;AAC7B,YAAM,SAAS,QAAQ,OAAR,CAAgB,QAAhB,CAAT,CADuB;;AAG7B,YAAI,OAAO,GAAP,EAAY;AACd,mBAAS,OAAO,GAAP,CAAW,MAAX,IAAqB,OAArB,CADK;SAAhB;OAHF;;AAQA,aAAO,MAAP,CAXU;;;;8BAcF,KAAK,UAAU;AACvB,gBAAU,GAAV,IAAiB,QAAjB,CADuB;;;;8BAIf,SAAS,QAAQ;AACzB,UAAM,SAAS,KAAK,SAAL,EAAT,CADmB;AAEzB,UAAI,SAAS,IAAT,CAFqB;AAGzB,UAAM,UAAU;AACd,qBAAa,SAAb;AACA,iBAAS,MAAT;OAFI,CAHmB;;AAQzB,wBACG,GADH,wCAEG,IAFH,CAEQ;AACJ,aAAK,MAAL;AACA,mBAAW,UAAU,MAAV,CAAX;OAJJ,EAKK,UAAC,GAAD,EAAM,SAAN,EAAoB;AACrB,YAAI,UAAU,OAAO,KAAP,EAAc;AAC1B,kBAAQ,KAAR,GAAgB,OAAO,KAAP,CADU;SAA5B;AAGA,iBAAS,UAAU,OAAV,EAAmB,OAAnB,CAAT,CAJqB;OAApB,CALL,CARyB;;AAoBzB,aAAO,MAAP,CApByB;;;;SApBvB;;;kBA4CS,IAAI,gBAAJ","file":"helpers/translate.js","sourcesContent":["//\n// helpers.translate\n//\n'use strict';\n\nimport i18next from 'i18next';\nimport Radio from 'backbone.radio';\nimport sprintf from 'i18next-sprintf-postprocessor';\n\nconst resources = {};\nconst channel = Radio.channel('global');\n\nclass TranslateHelpers {\n\n  getLocale() {\n    let locale = 'en-GB';\n\n    if (channel.request('config')) {\n      const config = channel.request('config');\n\n      if (config.app) {\n        locale = config.app.locale || 'en-GB';\n      }\n    }\n\n    return locale;\n  }\n\n  addLocale(key, resStore) {\n    resources[key] = resStore;\n  }\n\n  translate(i18nKey, params) {\n    const locale = this.getLocale();\n    let result = null;\n    const options = {\n      postProcess: 'sprintf',\n      sprintf: params\n    };\n\n    i18next\n      .use(sprintf)\n      .init({\n        lng: locale,\n        resources: resources[locale]\n      }, (err, translate) => {\n        if (params && params.count) {\n          options.count = params.count;\n        }\n        result = translate(i18nKey, options);\n      });\n\n    return result;\n  }\n}\n\nexport default new TranslateHelpers();\n"],"sourceRoot":"/source/"}