{"version":3,"sources":["helpers/translate.js"],"names":[],"mappings":";;;AAGA,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;AAKb,IAAM,SAAS,GAAG,EAAE,CAAC;AACrB,IAAM,OAAO,GAAG,mBAAM,OAAO,CAAC,QAAQ,CAAC,CAAC;;IAElC,gBAAgB;WAAhB,gBAAgB;0BAAhB,gBAAgB;;;eAAhB,gBAAgB;;gCAER;AACV,UAAI,MAAM,GAAG,OAAO,CAAC;;AAErB,UAAI,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAC7B,YAAM,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEzC,YAAI,MAAM,CAAC,GAAG,EAAE;AACd,gBAAM,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,IAAI,OAAO,CAAC;SACvC;OACF;;AAED,aAAO,MAAM,CAAC;KACf;;;8BAES,GAAG,EAAE,QAAQ,EAAE;AACvB,eAAS,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC;KAC3B;;;8BAES,OAAO,EAAE,MAAM,EAAE;AACzB,UAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;AAChC,UAAI,MAAM,GAAG,IAAI,CAAC;;AAElB,8BAAQ,IAAI,CAAC;AACX,WAAG,EAAE,MAAM;AACX,gBAAQ,EAAE,SAAS,CAAC,MAAM,CAAC;OAC5B,EAAE,UAAC,GAAG,EAAE,SAAS,EAAK;AACrB,cAAM,GAAG,SAAS,CAAC,OAAO,EAAE;AAC1B,qBAAW,EAAE,SAAS;AACtB,iBAAO,EAAE,MAAM;SAChB,CAAC,CAAC;OACJ,CAAC,CAAC;;AAEH,aAAO,MAAM,CAAC;KACf;;;SAnCG,gBAAgB;;;kBAsCP,IAAI,gBAAgB,EAAE","file":"helpers/translate.js","sourcesContent":["//\n// helpers.translate\n//\n'use strict';\n\nimport i18next from 'i18next-client';\nimport Radio from 'backbone.radio';\n\nconst resources = {};\nconst channel = Radio.channel('global');\n\nclass TranslateHelpers {\n\n  getLocale() {\n    let locale = 'en-GB';\n\n    if (channel.request('config')) {\n      const config = channel.request('config');\n\n      if (config.app) {\n        locale = config.app.locale || 'en-GB';\n      }\n    }\n\n    return locale;\n  }\n\n  addLocale(key, resStore) {\n    resources[key] = resStore;\n  }\n\n  translate(i18nKey, params) {\n    const locale = this.getLocale();\n    let result = null;\n\n    i18next.init({\n      lng: locale,\n      resStore: resources[locale]\n    }, (err, translate) => {\n      result = translate(i18nKey, {\n        postProcess: 'sprintf',\n        sprintf: params\n      });\n    });\n\n    return result;\n  }\n}\n\nexport default new TranslateHelpers();\n"],"sourceRoot":"/source/"}