{"version":3,"sources":["helpers/currency.js"],"names":["channel","CurrencyHelper","code","language","amount","decimals","currencyLocale","lang","request","formatStr","languageData","format","i"],"mappings":"AAAA;;;;;;;;AAEA;;;;AACA;;;;;;;;AAEA,IAAMA,UAAU,mBAAMA,OAAN,CAAc,QAAd,CAAhB;;IAEMC,c;;;;;;;8BACMC,I,EAAMC,Q,EAAU;AACxB,wBAAQA,QAAR,CAAiBD,IAAjB,EAAuBC,QAAvB;AACD;;;2BAEMC,M,EAA6C;AAAA,UAArCC,QAAqC,uEAA1B,CAA0B;AAAA,UAAvBC,cAAuB,uEAAN,IAAM;;AAClD,UAAMC,OAAOD,kBAAkBN,QAAQQ,OAAR,CAAgB,gBAAhB,CAA/B;;AAEA,UAAIC,YAAY,MAAhB;;AAEA,UAAIF,IAAJ,EAAU;AACR,0BAAQJ,QAAR,CAAiBI,IAAjB;AACA,YAAIJ,WAAW,kBAAQO,YAAR,EAAf;AACA,YAAIP,SAASQ,MAAb,EAAqB;AACnBF,sBAAYN,SAASQ,MAArB;AACD;AACF;;AAED,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIP,QAApB,EAA8BO,GAA9B,EAAmC;AACjC,YAAIA,MAAM,CAAV,EAAa;AACXH,uBAAa,GAAb;AACD;;AAEDA,qBAAa,GAAb;AACD;;AAED,aAAO,uBAAQL,MAAR,EAAgBO,MAAhB,CAAuBF,SAAvB,CAAP;AACD;;;;;;kBAGY,IAAIR,cAAJ,E","file":"currency.js","sourcesContent":["'use strict';\n\nimport Radio from 'backbone.radio';\nimport numeral from 'numeral';\n\nconst channel = Radio.channel('global');\n\nclass CurrencyHelper {\n  addLocale(code, language) {\n    numeral.language(code, language);\n  }\n\n  format(amount, decimals = 0, currencyLocale = null) {\n    const lang = currencyLocale || channel.request('currencyLocale');\n\n    let formatStr = '$0,0';\n\n    if (lang) {\n      numeral.language(lang);\n      let language = numeral.languageData();\n      if (language.format) {\n        formatStr = language.format;\n      }\n    }\n\n    for (let i = 0; i < decimals; i++) {\n      if (i === 0) {\n        formatStr += '.';\n      }\n\n      formatStr += '0';\n    }\n\n    return numeral(amount).format(formatStr);\n  }\n}\n\nexport default new CurrencyHelper();\n"]}