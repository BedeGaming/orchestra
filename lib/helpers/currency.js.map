{"version":3,"sources":["helpers/currency.js"],"names":[],"mappings":"AAAA;;;;;;;;AAEA;;;;AACA;;;;;;;;AAEA,IAAM,UAAU,mBAAM,OAAN,CAAc,QAAd,CAAV;;IAEA;;;;;;;8BACM,MAAM,UAAU;AACxB,wBAAQ,QAAR,CAAiB,IAAjB,EAAuB,QAAvB,EADwB;;;;2BAInB,QAA6C;UAArC,iEAAW,iBAA0B;UAAvB,uEAAiB,oBAAM;;AAClD,UAAM,OAAO,kBAAkB,QAAQ,OAAR,CAAgB,gBAAhB,CAAlB,CADqC;;AAGlD,UAAI,YAAY,MAAZ,CAH8C;;AAKlD,UAAI,IAAJ,EAAU;AACR,0BAAQ,QAAR,CAAiB,IAAjB,EADQ;AAER,YAAI,WAAW,kBAAQ,YAAR,EAAX,CAFI;AAGR,YAAI,SAAS,MAAT,EAAiB;AACnB,sBAAY,SAAS,MAAT,CADO;SAArB;OAHF;;AAQA,WAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,QAAJ,EAAc,GAA9B,EAAmC;AACjC,YAAI,MAAM,CAAN,EAAS;AACX,uBAAa,GAAb,CADW;SAAb;;AAIA,qBAAa,GAAb,CALiC;OAAnC;;AAQA,aAAO,uBAAQ,MAAR,EAAgB,MAAhB,CAAuB,SAAvB,CAAP,CArBkD;;;;SALhD;;;kBA8BS,IAAI,cAAJ","file":"helpers/currency.js","sourcesContent":["'use strict';\n\nimport Radio from 'backbone.radio';\nimport numeral from 'numeral';\n\nconst channel = Radio.channel('global');\n\nclass CurrencyHelper {\n  addLocale(code, language) {\n    numeral.language(code, language);\n  }\n\n  format(amount, decimals = 0, currencyLocale = null) {\n    const lang = currencyLocale || channel.request('currencyLocale');\n\n    let formatStr = '$0,0';\n\n    if (lang) {\n      numeral.language(lang);\n      let language = numeral.languageData();\n      if (language.format) {\n        formatStr = language.format;\n      }\n    }\n\n    for (let i = 0; i < decimals; i++) {\n      if (i === 0) {\n        formatStr += '.';\n      }\n\n      formatStr += '0';\n    }\n\n    return numeral(amount).format(formatStr);\n  }\n}\n\nexport default new CurrencyHelper();\n"],"sourceRoot":"/source/"}