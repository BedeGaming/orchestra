{"version":3,"sources":["helpers/currency.js"],"names":["channel","Radio","CurrencyHelper","code","language","numbro","culture","amount","decimals","currencyLocale","lang","request","formatStr","cultureData","format","i","Currency"],"mappings":"AAAA;;;;;;;;;AAEA;;;;AACA;;;;;;;;AAEA,IAAMA,UAAUC,mBAAMD,OAAN,CAAc,QAAd,CAAhB;;IAEME,c;;;;;;;8BACMC,I,EAAMC,Q,EAAU;AACxBC,uBAAOC,OAAP,CAAeH,IAAf,EAAqBC,QAArB;AACD;;;2BAEMG,M,EAA6C;AAAA,UAArCC,QAAqC,uEAA1B,CAA0B;AAAA,UAAvBC,cAAuB,uEAAN,IAAM;;AAClD,UAAMC,OAAOD,kBAAkBT,QAAQW,OAAR,CAAgB,gBAAhB,CAA/B;;AAEA,UAAIC,YAAY,MAAhB;;AAEA,UAAIF,IAAJ,EAAU;AACRL,yBAAOC,OAAP,CAAeI,IAAf;AACA,YAAIN,WAAWC,iBAAOQ,WAAP,EAAf;AACA,YAAIT,SAASU,MAAb,EAAqB;AACnBF,sBAAYR,SAASU,MAArB;AACD;AACF;;AAED,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIP,QAApB,EAA8BO,GAA9B,EAAmC;AACjC,YAAIA,MAAM,CAAV,EAAa;AACXH,uBAAa,GAAb;AACD;;AAEDA,qBAAa,GAAb;AACD;;AAED,aAAO,sBAAOL,MAAP,EAAeO,MAAf,CAAsBF,SAAtB,CAAP;AACD;;;;;;AAGI,IAAMI,8BAAW,IAAId,cAAJ,EAAjB","file":"currency.js","sourcesContent":["'use strict';\n\nimport Radio from 'backbone.radio';\nimport numbro from 'numbro';\n\nconst channel = Radio.channel('global');\n\nclass CurrencyHelper {\n  addLocale(code, language) {\n    numbro.culture(code, language);\n  }\n\n  format(amount, decimals = 0, currencyLocale = null) {\n    const lang = currencyLocale || channel.request('currencyLocale');\n\n    let formatStr = '$0,0';\n\n    if (lang) {\n      numbro.culture(lang);\n      let language = numbro.cultureData();\n      if (language.format) {\n        formatStr = language.format;\n      }\n    }\n\n    for (let i = 0; i < decimals; i++) {\n      if (i === 0) {\n        formatStr += '.';\n      }\n\n      formatStr += '0';\n    }\n\n    return numbro(amount).format(formatStr);\n  }\n}\n\nexport const Currency = new CurrencyHelper();\n"]}